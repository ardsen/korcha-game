import{r as m,j as a}from"./index-c824156c.js";import{s}from"./GamePlay.module-a4b6d93f.js";function $({spell:e,setIsAttackEffect:t,setIsAttackEffectX:o,setPointerNone:r,setDireWolf:h,setCurrentAccount:x,direwolf:n,setDamageTimeout:C,currentAccount:i,isMagic:g}){let c=Math.floor(Math.random()*30+85)/100;const[N,j]=m.useState(!1),[v,f]=m.useState(!0),[w,u]=m.useState(!1),S=()=>{u(!0),setTimeout(()=>{u(!1)},1200)},p=function(){if(!v||n.remainHealth<=0)return;h(l=>({...l,remainHealth:l.remainHealth-Math.trunc(i.magP*c*e.damage-i.magP*n.magDef*e.damage/300)})),x(l=>({...l,remainStamina:l.remainStamina-e.staminaCost})),r(!0),t(!0),setTimeout(()=>o(!0),200),document.querySelector("#status").insertAdjacentHTML("afterbegin",`<p style = "background-color : rgb(0, 71, 0)">${Math.trunc(i.magP*c*e.damage-i.magP*n.magDef*e.damage/300)} magical damage dealt.</p>`);const M=setTimeout(()=>{x(l=>({...l,remainHealth:l.remainHealth-(g?Math.trunc(n.magP*c)-(n.magP-i.magDef)/300:Math.trunc(n.ap*c)-(n.ap-i.physDef)/300)})),document.querySelector("#status").insertAdjacentHTML("afterbegin",`<p>${Math.trunc(g?n.magP*c-(n.magP-i.magDef)/300:n.ap*c-(n.ap-i.physDef)/300)} ${g?"magical damage received.":"damage received."}</p>`),r(!1)},2e3);C(M),setTimeout(()=>{t(!1),o(!1)},1200)};return m.useEffect(()=>e.staminaCost>i.remainStamina?f(!1):f(!0),[i.remainStamina,e.staminaCost]),a.jsxs("div",{style:{display:"flex",position:"relative",flexDirection:"column"},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onClick:v?p:S,children:[a.jsx("img",{className:s.spellImg,src:e.img,alt:""}),N&&a.jsxs("div",{className:s.spellInfoContainer,children:[a.jsx("p",{children:e.name}),a.jsxs("p",{children:["-",e.staminaCost,a.jsx("svg",{fill:"rgb(11, 53, 241)",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 375.6 375.6",style:{verticalAlign:"-3px"},children:a.jsx("g",{children:a.jsx("path",{d:`M264.189,74.338c-34.517-41.977-68.516-70.779-69.946-71.984c-3.723-3.139-9.166-3.139-12.888,0
        c-1.431,1.205-35.43,30.008-69.946,71.984c-47.074,57.246-70.943,109.035-70.943,153.927c0,81.24,66.094,147.334,147.334,147.334
        c81.24,0,147.334-66.094,147.334-147.334C335.133,183.374,311.264,131.584,264.189,74.338z M203.358,327.385
        c-1.281,0.326-2.565,0.472-3.826,0.472c-6.892,0-13.178-4.65-14.957-11.629c-2.104-8.257,2.872-16.65,11.126-18.779
        c2.82-0.742,64.614-17.775,64.611-79.787c0-8.531,6.916-15.449,15.447-15.449c8.532,0,15.45,6.916,15.45,15.447
        C291.215,286.758,233.759,319.649,203.358,327.385z`})})})]})]}),w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:s.lowStamina,children:[a.jsx("p",{children:"LOW STAMINA"}),a.jsx("div",{className:s.lowStaminaTimerCont,children:a.jsx("div",{className:`${s.lowStaminaTimer} ${s.animationTimerStamina}`})})]}),a.jsx("div",{className:"overlay"})]})]})}function H({attackHandler:e,pointerNone:t,attackHandlerStrong:o,isStaminaEnough:r,isStaminaEnoughStrong:h,isStaminaEnoughCrush:x,restHandler:n,attackHandlerCrush:C,currentAccount:i,setIsAttackEffect:g,setIsAttackEffectX:c,setPointerNone:N,setDireWolf:j,setCurrentAccount:v,direwolf:f,setDamageTimeout:w,myElementRef:u,isMagic:S}){const[p,M]=m.useState(!1),[l,b]=m.useState(!1);return a.jsxs("div",{className:`${s.attackMenuContainer} ${t?"pointer-event-none-button":""}`,children:[a.jsxs("div",{className:s.attackMenuInsideContainer,children:[a.jsxs("button",{onClick:()=>M(!p),children:["Attack ",p?"-":"+"]}),p&&a.jsxs("div",{className:s.attackButtonInside,children:[a.jsx("button",{onClick:e,className:`${s.basicAttackButton} ${r?"pointer-event-none-button":""}`,children:"Basic"}),r&&a.jsxs("div",{className:s.notEnoughStamina,children:["Low",a.jsx("svg",{fill:"rgb(11, 53, 241)",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 375.6 375.6",children:a.jsx("g",{children:a.jsx("path",{d:`M264.189,74.338c-34.517-41.977-68.516-70.779-69.946-71.984c-3.723-3.139-9.166-3.139-12.888,0
        c-1.431,1.205-35.43,30.008-69.946,71.984c-47.074,57.246-70.943,109.035-70.943,153.927c0,81.24,66.094,147.334,147.334,147.334
        c81.24,0,147.334-66.094,147.334-147.334C335.133,183.374,311.264,131.584,264.189,74.338z M203.358,327.385
        c-1.281,0.326-2.565,0.472-3.826,0.472c-6.892,0-13.178-4.65-14.957-11.629c-2.104-8.257,2.872-16.65,11.126-18.779
        c2.82-0.742,64.614-17.775,64.611-79.787c0-8.531,6.916-15.449,15.447-15.449c8.532,0,15.45,6.916,15.45,15.447
        C291.215,286.758,233.759,319.649,203.358,327.385z`})})})]}),a.jsx("button",{onClick:o,className:`${s.strongAttackButton} ${h?"pointer-event-none-button":""}`,children:"Strong"}),h&&a.jsxs("div",{className:s.notEnoughStamina,style:{left:"7.1rem"},children:["Low",a.jsx("svg",{fill:"rgb(11, 53, 241)",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 375.6 375.6",children:a.jsx("g",{children:a.jsx("path",{d:`M264.189,74.338c-34.517-41.977-68.516-70.779-69.946-71.984c-3.723-3.139-9.166-3.139-12.888,0
        c-1.431,1.205-35.43,30.008-69.946,71.984c-47.074,57.246-70.943,109.035-70.943,153.927c0,81.24,66.094,147.334,147.334,147.334
        c81.24,0,147.334-66.094,147.334-147.334C335.133,183.374,311.264,131.584,264.189,74.338z M203.358,327.385
        c-1.281,0.326-2.565,0.472-3.826,0.472c-6.892,0-13.178-4.65-14.957-11.629c-2.104-8.257,2.872-16.65,11.126-18.779
        c2.82-0.742,64.614-17.775,64.611-79.787c0-8.531,6.916-15.449,15.447-15.449c8.532,0,15.45,6.916,15.45,15.447
        C291.215,286.758,233.759,319.649,203.358,327.385z`})})})]}),a.jsx("button",{onClick:C,className:`${s.crushAttackButton} ${x?"pointer-event-none-button":""}`,children:"Crush"}),x&&a.jsxs("div",{className:s.notEnoughStamina,style:{left:"13.4rem"},children:["Low",a.jsx("svg",{fill:"rgb(11, 53, 241)",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 375.6 375.6",children:a.jsx("g",{children:a.jsx("path",{d:`M264.189,74.338c-34.517-41.977-68.516-70.779-69.946-71.984c-3.723-3.139-9.166-3.139-12.888,0
        c-1.431,1.205-35.43,30.008-69.946,71.984c-47.074,57.246-70.943,109.035-70.943,153.927c0,81.24,66.094,147.334,147.334,147.334
        c81.24,0,147.334-66.094,147.334-147.334C335.133,183.374,311.264,131.584,264.189,74.338z M203.358,327.385
        c-1.281,0.326-2.565,0.472-3.826,0.472c-6.892,0-13.178-4.65-14.957-11.629c-2.104-8.257,2.872-16.65,11.126-18.779
        c2.82-0.742,64.614-17.775,64.611-79.787c0-8.531,6.916-15.449,15.447-15.449c8.532,0,15.45,6.916,15.45,15.447
        C291.215,286.758,233.759,319.649,203.358,327.385z`})})})]})]})]}),a.jsxs("div",{className:s.spellsButtonContainer,children:[a.jsxs("button",{onClick:()=>b(!l),children:["Spells ",l?"-":"+"]}),l&&a.jsx("div",{className:s.spellsButtonInside,children:a.jsx("ul",{className:s.spellsUl,children:i.inventory.filter(d=>d.itemType==="spell").filter((d,k,B)=>B.findIndex(y=>y.name===d.name)===k).map(d=>a.jsx($,{spell:d,setIsAttackEffect:g,setIsAttackEffectX:c,setPointerNone:N,setDireWolf:j,setCurrentAccount:v,direwolf:f,setDamageTimeout:w,myElementRef:u,currentAccount:i,isMagic:S},d.id))})})," "]}),a.jsx("button",{onClick:n,className:s.restButton,children:"Rest"})]})}function I({currentEnemy:e,attackEffect:t,attackEffectX:o}){const[r,h]=m.useState(!1);return a.jsx(a.Fragment,{children:a.jsxs("div",{className:s.enemyAvatar,children:[a.jsx("img",{src:e.img,alt:""}),a.jsxs("div",{className:s.characterName,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[a.jsx("h3",{children:e.tag}),r&&a.jsxs("div",{className:s.characterInfo,children:[a.jsxs("p",{children:["Physical Attack Power: ",e.ap]}),a.jsxs("p",{children:["Magical Attack Power: ",e.magP]}),a.jsxs("p",{children:["Health: ",e.health]}),a.jsxs("p",{children:["Physical Defence: ",e.physDef]}),a.jsxs("p",{children:["Magic Defence: ",e.magDef]})]})]}),t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`${s.attackEffect} animation-attackx`}),a.jsx("div",{className:"overlay"})]}),o&&a.jsx("div",{className:`${s.attackEffect2} animation-attacky`})," "]})})}function z({currentAccount:e}){let t=(e.remainHealth/e.health*100).toFixed(1);return a.jsxs("div",{className:s.healthBarWrapper,children:[a.jsxs("span",{className:s.healthText,children:[Math.trunc(e.remainHealth),"/",e.health]}),a.jsx("svg",{className:"stamina-drop",version:"1.0",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 64 64",children:a.jsx("path",{fill:"rgb(250, 50,50)",d:`M48,5c-4.418,0-8.418,1.791-11.313,4.687l-3.979,3.961c-0.391,0.391-1.023,0.391-1.414,0
	c0,0-3.971-3.97-3.979-3.961C24.418,6.791,20.418,5,16,5C7.163,5,0,12.163,0,21c0,3.338,1.024,6.436,2.773,9
	c0,0,0.734,1.164,1.602,2.031s24.797,24.797,24.797,24.797C29.953,57.609,30.977,58,32,58s2.047-0.391,2.828-1.172
	c0,0,23.93-23.93,24.797-24.797S61.227,30,61.227,30C62.976,27.436,64,24.338,64,21C64,12.163,56.837,5,48,5z M57,22
	c-0.553,0-1-0.447-1-1c0-4.418-3.582-8-8-8c-0.553,0-1-0.447-1-1s0.447-1,1-1c5.522,0,10,4.478,10,10C58,21.553,57.553,22,57,22z`})}),a.jsxs("span",{className:s.healthBarText,children:[t,"%"]}),a.jsx("div",{style:{height:"100%",width:`${t}%`,backgroundColor:"rgb(220, 30, 30)",position:"absolute",top:"0",left:"0",transition:" all 0.5s "}})]})}function D({currentAccount:e}){let t=(e.remainStamina/e.stamina*100).toFixed(1);return a.jsx(a.Fragment,{children:a.jsxs("div",{className:s.staminaBarWrapper,children:[a.jsxs("span",{className:s.staminaText,children:[Math.trunc(e.remainStamina),"/",e.stamina]}),a.jsx("svg",{className:"stamina-drop",fill:"rgb(11, 53, 241)",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 375.6 375.6",children:a.jsx("g",{children:a.jsx("path",{d:`M264.189,74.338c-34.517-41.977-68.516-70.779-69.946-71.984c-3.723-3.139-9.166-3.139-12.888,0
		c-1.431,1.205-35.43,30.008-69.946,71.984c-47.074,57.246-70.943,109.035-70.943,153.927c0,81.24,66.094,147.334,147.334,147.334
		c81.24,0,147.334-66.094,147.334-147.334C335.133,183.374,311.264,131.584,264.189,74.338z M203.358,327.385
		c-1.281,0.326-2.565,0.472-3.826,0.472c-6.892,0-13.178-4.65-14.957-11.629c-2.104-8.257,2.872-16.65,11.126-18.779
		c2.82-0.742,64.614-17.775,64.611-79.787c0-8.531,6.916-15.449,15.447-15.449c8.532,0,15.45,6.916,15.45,15.447
		C291.215,286.758,233.759,319.649,203.358,327.385z`})})}),a.jsxs("span",{className:s.healthBarText,children:[isNaN(t)?"0":t,"%"]}),a.jsx("div",{style:{height:"100%",width:`${t}%`,backgroundColor:"rgb(11, 53, 241)",position:"absolute",top:"0",left:"0",transition:"all .5s"}})]})})}export{H as A,z as E,D as a,I as b};
